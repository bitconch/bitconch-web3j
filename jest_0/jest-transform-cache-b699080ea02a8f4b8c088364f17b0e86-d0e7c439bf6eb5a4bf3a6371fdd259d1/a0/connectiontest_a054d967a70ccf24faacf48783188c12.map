{"version":3,"sources":["connection.test.js"],"names":["mockRpcEnabled","jest","setTimeout","errorMessage","errorResponse","error","message","result","undefined","test","account","BusAccount","connection","Connection","url","mockRpc","push","method","params","pubKey","toBase58","expect","fetchAccountDetail","rejects","toThrow","console","log","fullnodeExit","toBe","fetchAccountBalance","balance","toBeGreaterThanOrEqual","fetchAccountReputation","fetchRoundLeader","slotLeader","pubkey","gossip","tpu","rpc","fetchClusterNodes","clusterNodes","toHaveLength","toBeNull","length","toBeGreaterThan","getEpochVoteAccounts","voteAccounts","badTransactionSignature","confmTxn","fetchSignatureState","fetchTxnAmount","count","getTotalSupply","fetchRecentBlockhash","recentPackagehash","feeCalculator","difsPerSignature","reqDrone","owner","difs","reputations","data","executable","toEqual","SystemController","controllerId","reqReputation","accountFrom","accountTo","transaction","transfer","sendTxn","signature","i","toBeLessThan","Ok","resolves","toBeLessThanOrEqual","add","controllerAccount","mockCallback","fn","subscriptionId","onAccountChange","ControllerLoader","load","BpfControllerLoader","mock","calls","Error","DEFAULT_TICKS_PER_SLOT","NUM_TICKS_PER_SEC","removeListenerOfAccountChange","notified","onControllerAccountChange","keyedAccountInfo","accountId","toString","removeControllerAccountChangeListener"],"mappings":"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","sourcesContent":["// @flow\nimport {BusAccount, Connection, BpfControllerLoader, ControllerLoader, SystemController} from '../src';\nimport {DEFAULT_TICKS_PER_SLOT, NUM_TICKS_PER_SEC} from '../src/timing';\nimport {mockRpc, mockRpcEnabled} from './__mocks__/node-fetch';\nimport {mockGetRecentBlockhash} from './mockrpc/get-recent-blockhash';\nimport {url} from './url';\nimport {sleep} from '../src/util/sleep';\n\nif (!mockRpcEnabled) {\n  // The default of 5 seconds is too slow for live testing sometimes\n  jest.setTimeout(30000);\n}\n\nconst errorMessage = 'Invalid request';\nconst errorResponse = {\n  error: {\n    message: errorMessage,\n  },\n  result: undefined,\n};\n\ntest('get account info - error', () => {\n  const account = new BusAccount();\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getAccountInfo',\n      params: [account.pubKey.toBase58()],\n    },\n    errorResponse,\n  ]);\n\n  expect(connection.fetchAccountDetail(account.pubKey)).rejects.toThrow(\n    errorMessage,\n  );\n});\n\ntest('fullnodeQuit', async () => {\n  if (!mockRpcEnabled) {\n    console.log('fullnodeExit skipped on live node');\n    return;\n  }\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'fullnodeQuit',\n    },\n    {\n      error: null,\n      result: false,\n    },\n  ]);\n\n  const result = await connection.fullnodeExit();\n  expect(result).toBe(false);\n});\n\ntest('get balance', async () => {\n  const account = new BusAccount();\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getDif',\n      params: [account.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: 0,\n    },\n  ]);\n\n  const balance = await connection.fetchAccountBalance(account.pubKey);\n  expect(balance).toBeGreaterThanOrEqual(0);\n});\n\ntest('get reputation', async () => {\n  const account = new BusAccount();\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getReputation',\n      params: [account.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: 0,\n    },\n  ]);\n\n  const balance = await connection.fetchAccountReputation(account.pubKey);\n  expect(balance).toBeGreaterThanOrEqual(0);\n});\n\ntest('get slot leader', async () => {\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getRoundLeader',\n    },\n    {\n      error: null,\n      result: '11111111111111111111111111111111',\n    },\n  ]);\n\n  const slotLeader = await connection.fetchRoundLeader();\n  if (mockRpcEnabled) {\n    expect(slotLeader).toBe('11111111111111111111111111111111');\n  } else {\n    // No idea what the correct slotLeader value should be on a live cluster, so\n    // just check the type\n    expect(typeof slotLeader).toBe('string');\n  }\n});\n\ntest('get cluster nodes', async () => {\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getClusterNodes',\n    },\n    {\n      error: null,\n      result: [\n        {\n          pubkey: '11111111111111111111111111111111',\n          gossip: '127.0.0.0:1234',\n          tpu: '127.0.0.0:1235',\n          rpc: null,\n        },\n      ],\n    },\n  ]);\n\n  const clusterNodes = await connection.fetchClusterNodes();\n  if (mockRpcEnabled) {\n    expect(clusterNodes).toHaveLength(1);\n    expect(clusterNodes[0].pubkey).toBe('11111111111111111111111111111111');\n    expect(typeof clusterNodes[0].gossip).toBe('string');\n    expect(typeof clusterNodes[0].tpu).toBe('string');\n    expect(clusterNodes[0].rpc).toBeNull();\n  } else {\n    // There should be at least one node (the node that we're talking to)\n    expect(clusterNodes.length).toBeGreaterThan(0);\n  }\n});\n\ntest('getEpochVoteAccounts', async () => {\n  if (mockRpcEnabled) {\n    console.log('non-live test skipped');\n    return;\n  }\n\n  const connection = new Connection(url);\n  const voteAccounts = await connection.getEpochVoteAccounts();\n  expect(voteAccounts.length).toBeGreaterThan(0);\n});\n\ntest('confirm transaction - error', () => {\n  const connection = new Connection(url);\n\n  const badTransactionSignature = 'bad transaction signature';\n\n  mockRpc.push([\n    url,\n    {\n      method: 'confirmTxn',\n      params: [badTransactionSignature],\n    },\n    errorResponse,\n  ]);\n\n  expect(\n    connection.confmTxn(badTransactionSignature),\n  ).rejects.toThrow(errorMessage);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getSignatureState',\n      params: [badTransactionSignature],\n    },\n    errorResponse,\n  ]);\n\n  expect(\n    connection.fetchSignatureState(badTransactionSignature),\n  ).rejects.toThrow(errorMessage);\n});\n\ntest('get transaction count', async () => {\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getTxnCnt',\n      params: [],\n    },\n    {\n      error: null,\n      result: 1000000,\n    },\n  ]);\n\n  const count = await connection.fetchTxnAmount();\n  expect(count).toBeGreaterThanOrEqual(0);\n});\n\ntest('get total supply', async () => {\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getTotalSupply',\n      params: [],\n    },\n    {\n      error: null,\n      result: 1000000,\n    },\n  ]);\n\n  const count = await connection.getTotalSupply();\n  expect(count).toBeGreaterThanOrEqual(0);\n});\n\ntest('get recent blockhash', async () => {\n  const connection = new Connection(url);\n\n  mockGetRecentBlockhash();\n\n  const [\n    recentPackagehash,\n    feeCalculator,\n  ] = await connection.fetchRecentBlockhash();\n  expect(recentPackagehash.length).toBeGreaterThanOrEqual(43);\n  expect(feeCalculator.difsPerSignature).toBeGreaterThanOrEqual(0);\n});\n\ntest('request airdrop', async () => {\n  const account = new BusAccount();\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'requestDif',\n      params: [account.pubKey.toBase58(), 40],\n    },\n    {\n      error: null,\n      result:\n        '1WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n    },\n  ]);\n  mockRpc.push([\n    url,\n    {\n      method: 'requestDif',\n      params: [account.pubKey.toBase58(), 2],\n    },\n    {\n      error: null,\n      result:\n        '2WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n    },\n  ]);\n  mockRpc.push([\n    url,\n    {\n      method: 'getDif',\n      params: [account.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: 42,\n    },\n  ]);\n\n  await connection.reqDrone(account.pubKey, 40);\n  await connection.reqDrone(account.pubKey, 2);\n\n  const balance = await connection.fetchAccountBalance(account.pubKey);\n  expect(balance).toBe(42);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getAccountInfo',\n      params: [account.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: {\n        owner: [\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n        ],\n        difs: 42,\n        reputations: 0,\n        data: [],\n        executable: false,\n      },\n    },\n  ]);\n\n  const fetchAccountDetail = await connection.fetchAccountDetail(account.pubKey);\n  expect(fetchAccountDetail.difs).toBe(42);\n  expect(fetchAccountDetail.reputations).toBe(0);\n  expect(fetchAccountDetail.data).toHaveLength(0);\n  expect(fetchAccountDetail.owner).toEqual(SystemController.controllerId);\n});\n\ntest('request Reputation', async () => {\n  const account = new BusAccount();\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'requestReputation',\n      params: [account.pubKey.toBase58(), 40],\n    },\n    {\n      error: null,\n      result:\n        '1WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n    },\n  ]);\n  mockRpc.push([\n    url,\n    {\n      method: 'requestReputation',\n      params: [account.pubKey.toBase58(), 2],\n    },\n    {\n      error: null,\n      result:\n        '2WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n    },\n  ]);\n  mockRpc.push([\n    url,\n    {\n      method: 'getReputation',\n      params: [account.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: 42,\n    },\n  ]);\n\n  await connection.reqReputation(account.pubKey, 40);\n  await connection.reqReputation(account.pubKey, 2);\n\n  const reputations = await connection.fetchAccountReputation(account.pubKey);\n  expect(reputations).toBe(42);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getAccountInfo',\n      params: [account.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: {\n        owner: [\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n          0,\n        ],\n        difs: 0,\n        reputations: 42,\n        data: [],\n        executable: false,\n      },\n    },\n  ]);\n\n  const fetchAccountDetail = await connection.fetchAccountDetail(account.pubKey);\n  expect(fetchAccountDetail.difs).toBe(0);\n  expect(fetchAccountDetail.reputations).toBe(42);\n  expect(fetchAccountDetail.data).toHaveLength(0);\n  expect(fetchAccountDetail.owner).toEqual(SystemController.controllerId);\n});\n\ntest('transaction', async () => {\n  const accountFrom = new BusAccount();\n  const accountTo = new BusAccount();\n  const connection = new Connection(url);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'requestDif',\n      params: [accountFrom.pubKey.toBase58(), 100010],\n    },\n    {\n      error: null,\n      result:\n        '0WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n    },\n  ]);\n  mockRpc.push([\n    url,\n    {\n      method: 'getDif',\n      params: [accountFrom.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: 100010,\n    },\n  ]);\n  await connection.reqDrone(accountFrom.pubKey, 100010);\n  expect(await connection.fetchAccountBalance(accountFrom.pubKey)).toBe(100010);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'requestDif',\n      params: [accountTo.pubKey.toBase58(), 21],\n    },\n    {\n      error: null,\n      result:\n        '8WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n    },\n  ]);\n  mockRpc.push([\n    url,\n    {\n      method: 'getDif',\n      params: [accountTo.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: 21,\n    },\n  ]);\n  await connection.reqDrone(accountTo.pubKey, 21);\n  expect(await connection.fetchAccountBalance(accountTo.pubKey)).toBe(21);\n\n  mockGetRecentBlockhash();\n  mockRpc.push([\n    url,\n    {\n      method: 'sendTxn',\n    },\n    {\n      error: null,\n      result:\n        '3WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n    },\n  ]);\n\n  const transaction = SystemController.transfer(\n    accountFrom.pubKey,\n    accountTo.pubKey,\n    10,\n  );\n  const signature = await connection.sendTxn(transaction, accountFrom);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'confirmTxn',\n      params: [\n        '3WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n      ],\n    },\n    {\n      error: null,\n      result: true,\n    },\n  ]);\n\n  let i = 0;\n  for (;;) {\n    if (await connection.confmTxn(signature)) {\n      break;\n    }\n    console.log('not confirmed', signature);\n    expect(mockRpcEnabled).toBe(false);\n    expect(++i).toBeLessThan(10);\n    await sleep(500);\n  }\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getSignatureState',\n      params: [\n        '3WE5w4B7v59x6qjyC4FbG2FEKYKQfvsJwqSxNVmtMjT8TQ31hsZieDHcSgqzxiAoTL56n2w5TncjqEKjLhtF4Vk',\n      ],\n    },\n    {\n      error: null,\n      result: {Ok: null},\n    },\n  ]);\n  await expect(connection.fetchSignatureState(signature)).resolves.toEqual({\n    Ok: null,\n  });\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getDif',\n      params: [accountFrom.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: 2,\n    },\n  ]);\n\n  // accountFrom may have less than 100000 due to transaction fees\n  const balance = await connection.fetchAccountBalance(accountFrom.pubKey);\n  expect(balance).toBeGreaterThan(0);\n  expect(balance).toBeLessThanOrEqual(100000);\n\n  mockRpc.push([\n    url,\n    {\n      method: 'getDif',\n      params: [accountTo.pubKey.toBase58()],\n    },\n    {\n      error: null,\n      result: 31,\n    },\n  ]);\n  expect(await connection.fetchAccountBalance(accountTo.pubKey)).toBe(31);\n});\n\ntest('multi-instruction transaction', async () => {\n  if (mockRpcEnabled) {\n    console.log('non-live test skipped');\n    return;\n  }\n\n  const accountFrom = new BusAccount();\n  const accountTo = new BusAccount();\n  const connection = new Connection(url);\n\n  await connection.reqDrone(accountFrom.pubKey, 100000);\n  expect(await connection.fetchAccountBalance(accountFrom.pubKey)).toBe(100000);\n\n  await connection.reqDrone(accountTo.pubKey, 21);\n  expect(await connection.fetchAccountBalance(accountTo.pubKey)).toBe(21);\n\n  // 1. Move(accountFrom, accountTo)\n  // 2. Move(accountTo, accountFrom)\n  const transaction = SystemController.transfer(\n    accountFrom.pubKey,\n    accountTo.pubKey,\n    100,\n  ).add(\n    SystemController.transfer(accountTo.pubKey, accountFrom.pubKey, 100),\n  );\n  const signature = await connection.sendTxn(\n    transaction,\n    accountFrom,\n    accountTo,\n  );\n  let i = 0;\n  for (;;) {\n    if (await connection.confmTxn(signature)) {\n      break;\n    }\n\n    expect(mockRpcEnabled).toBe(false);\n    expect(++i).toBeLessThan(10);\n    await sleep(500);\n  }\n  await expect(connection.fetchSignatureState(signature)).resolves.toEqual({\n    Ok: null,\n  });\n\n  // accountFrom may have less than 100000 due to transaction fees\n  expect(await connection.fetchAccountBalance(accountFrom.pubKey)).toBeGreaterThan(0);\n  expect(\n    await connection.fetchAccountBalance(accountFrom.pubKey),\n  ).toBeLessThanOrEqual(100000);\n\n  expect(await connection.fetchAccountBalance(accountTo.pubKey)).toBe(21);\n});\n\ntest('account change notification', async () => {\n  if (mockRpcEnabled) {\n    console.log('non-live test skipped');\n    return;\n  }\n\n  const connection = new Connection(url);\n  const owner = new BusAccount();\n  const controllerAccount = new BusAccount();\n\n  const mockCallback = jest.fn();\n\n  const subscriptionId = connection.onAccountChange(\n    controllerAccount.pubKey,\n    mockCallback,\n  );\n\n  await connection.reqDrone(owner.pubKey, 100000);\n  await ControllerLoader.load(connection, owner, controllerAccount, BpfControllerLoader.controllerId, [\n    1,\n    2,\n    3,\n  ]);\n\n  // Wait for mockCallback to receive a call\n  let i = 0;\n  for (;;) {\n    if (mockCallback.mock.calls.length > 0) {\n      break;\n    }\n\n    if (++i === 30) {\n      throw new Error('BusAccount change notification not observed');\n    }\n    // Sleep for a 1/4 of a round, notifications only occur after a block is\n    // processed\n    await sleep((250 * DEFAULT_TICKS_PER_SLOT) / NUM_TICKS_PER_SEC);\n  }\n\n  await connection.removeListenerOfAccountChange(subscriptionId);\n\n  expect(mockCallback.mock.calls[0][0].difs).toBe(1);\n  expect(mockCallback.mock.calls[0][0].reputations).toBe(1);\n  expect(mockCallback.mock.calls[0][0].owner).toEqual(BpfControllerLoader.controllerId);\n});\n\ntest('controller account change notification', async () => {\n  if (mockRpcEnabled) {\n    console.log('non-live test skipped');\n    return;\n  }\n\n  const connection = new Connection(url);\n  const owner = new BusAccount();\n  const controllerAccount = new BusAccount();\n\n  // const mockCallback = jest.fn();\n\n  let notified = false;\n  const subscriptionId = connection.onControllerAccountChange(\n    BpfControllerLoader.controllerId,\n    keyedAccountInfo => {\n      if (keyedAccountInfo.accountId !== controllerAccount.pubKey.toString()) {\n        //console.log('Ignoring another account', keyedAccountInfo);\n        return;\n      }\n      expect(keyedAccountInfo.fetchAccountDetail.difs).toBe(1);\n      expect(keyedAccountInfo.fetchAccountDetail.reputations).toBe(1);\n      expect(keyedAccountInfo.fetchAccountDetail.owner).toEqual(BpfControllerLoader.controllerId);\n      notified = true;\n    },\n  );\n\n  await connection.reqDrone(owner.pubKey, 100000);\n  await ControllerLoader.load(connection, owner, controllerAccount, BpfControllerLoader.controllerId, [\n    1,\n    2,\n    3,\n  ]);\n\n  // Wait for mockCallback to receive a call\n  let i = 0;\n  while (!notified) {\n    //for (;;) {\n    if (++i === 30) {\n      throw new Error('Controller change notification not observed');\n    }\n    // Sleep for a 1/4 of a slot, notifications only occur after a block is\n    // processed\n    await sleep((250 * DEFAULT_TICKS_PER_SLOT) / NUM_TICKS_PER_SEC);\n  }\n\n  await connection.removeControllerAccountChangeListener(subscriptionId);\n});\n"]}