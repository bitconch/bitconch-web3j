012430a40a6e845fe1f20d9d3c82f633
"use strict";

var _busAccount = require("../src/bus-account");

var _budgetController = require("../src/budget-controller");

test('pay', function () {
  var from = new _busAccount.BusAccount();
  var program = new _busAccount.BusAccount();
  var to = new _busAccount.BusAccount();
  var transaction;
  transaction = _budgetController.BudgetController.pay(from.pubKey, program.pubKey, to.pubKey, 123);
  expect(transaction.operations[0].keys).toHaveLength(2);
  expect(transaction.operations[1].keys).toHaveLength(2); // TODO: Validate transaction contents more

  transaction = _budgetController.BudgetController.pay(from.pubKey, program.pubKey, to.pubKey, 123, _budgetController.BudgetController.signatureCond(from.pubKey));
  expect(transaction.operations[0].keys).toHaveLength(2);
  expect(transaction.operations[1].keys).toHaveLength(1); // TODO: Validate transaction contents more

  transaction = _budgetController.BudgetController.pay(from.pubKey, program.pubKey, to.pubKey, 123, _budgetController.BudgetController.signatureCond(from.pubKey), _budgetController.BudgetController.datetimeCond(from.pubKey, new Date()));
  expect(transaction.operations[0].keys).toHaveLength(2);
  expect(transaction.operations[1].keys).toHaveLength(1); // TODO: Validate transaction contents more

  transaction = _budgetController.BudgetController.payOnAll(from.pubKey, program.pubKey, to.pubKey, 123, _budgetController.BudgetController.signatureCond(from.pubKey), _budgetController.BudgetController.datetimeCond(from.pubKey, new Date()));
  expect(transaction.operations[0].keys).toHaveLength(2);
  expect(transaction.operations[1].keys).toHaveLength(1); // TODO: Validate transaction contents more
});
test('apply', function () {
  var from = new _busAccount.BusAccount();
  var program = new _busAccount.BusAccount();
  var to = new _busAccount.BusAccount();
  var transaction;
  transaction = _budgetController.BudgetController.sealWithDatetime(from.pubKey, program.pubKey, to.pubKey, new Date());
  expect(transaction.keys).toHaveLength(3); // TODO: Validate transaction contents more

  transaction = _budgetController.BudgetController.sealWithSignature(from.pubKey, program.pubKey, to.pubKey);
  expect(transaction.keys).toHaveLength(3); // TODO: Validate transaction contents more
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1ZGdldC1wcm9ncmFtLnRlc3QuanMiXSwibmFtZXMiOlsidGVzdCIsImZyb20iLCJCdXNBY2NvdW50IiwicHJvZ3JhbSIsInRvIiwidHJhbnNhY3Rpb24iLCJCdWRnZXRDb250cm9sbGVyIiwicGF5IiwicHViS2V5IiwiZXhwZWN0Iiwib3BlcmF0aW9ucyIsImtleXMiLCJ0b0hhdmVMZW5ndGgiLCJzaWduYXR1cmVDb25kIiwiZGF0ZXRpbWVDb25kIiwiRGF0ZSIsInBheU9uQWxsIiwic2VhbFdpdGhEYXRldGltZSIsInNlYWxXaXRoU2lnbmF0dXJlIl0sIm1hcHBpbmdzIjoiOztBQUVBOztBQUNBOztBQUVBQSxJQUFJLENBQUMsS0FBRCxFQUFRLFlBQU07QUFDaEIsTUFBTUMsSUFBSSxHQUFHLElBQUlDLHNCQUFKLEVBQWI7QUFDQSxNQUFNQyxPQUFPLEdBQUcsSUFBSUQsc0JBQUosRUFBaEI7QUFDQSxNQUFNRSxFQUFFLEdBQUcsSUFBSUYsc0JBQUosRUFBWDtBQUNBLE1BQUlHLFdBQUo7QUFFQUEsRUFBQUEsV0FBVyxHQUFHQyxtQ0FBaUJDLEdBQWpCLENBQ1pOLElBQUksQ0FBQ08sTUFETyxFQUVaTCxPQUFPLENBQUNLLE1BRkksRUFHWkosRUFBRSxDQUFDSSxNQUhTLEVBSVosR0FKWSxDQUFkO0FBTUFDLEVBQUFBLE1BQU0sQ0FBQ0osV0FBVyxDQUFDSyxVQUFaLENBQXVCLENBQXZCLEVBQTBCQyxJQUEzQixDQUFOLENBQXVDQyxZQUF2QyxDQUFvRCxDQUFwRDtBQUNBSCxFQUFBQSxNQUFNLENBQUNKLFdBQVcsQ0FBQ0ssVUFBWixDQUF1QixDQUF2QixFQUEwQkMsSUFBM0IsQ0FBTixDQUF1Q0MsWUFBdkMsQ0FBb0QsQ0FBcEQsRUFiZ0IsQ0FjaEI7O0FBRUFQLEVBQUFBLFdBQVcsR0FBR0MsbUNBQWlCQyxHQUFqQixDQUNaTixJQUFJLENBQUNPLE1BRE8sRUFFWkwsT0FBTyxDQUFDSyxNQUZJLEVBR1pKLEVBQUUsQ0FBQ0ksTUFIUyxFQUlaLEdB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bSAnLi4vc3JjL2J1cy1hY2NvdW50JztcbmltcG9ydCB7QnVkZ2V0Q29udHJvbGxlcn0gZnJvbSAnLi4vc3JjL2J1ZGdldC1jb250cm9sbGVyJztcblxudGVzdCgncGF5JywgKCkgPT4ge1xuICBjb25zdCBmcm9tID0gbmV3IEJ1c0FjY291bnQoKTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBCdXNBY2NvdW50KCk7XG4gIGNvbnN0IHRvID0gbmV3IEJ1c0FjY291bnQoKTtcbiAgbGV0IHRyYW5zYWN0aW9uO1xuXG4gIHRyYW5zYWN0aW9uID0gQnVkZ2V0Q29udHJvbGxlci5wYXkoXG4gICAgZnJvbS5wdWJLZXksXG4gICAgcHJvZ3JhbS5wdWJLZXksXG4gICAgdG8ucHViS2V5LFxuICAgIDEyMyxcbiAgKTtcbiAgZXhwZWN0KHRyYW5zYWN0aW9uLm9wZXJhdGlvbnNbMF0ua2V5cykudG9IYXZlTGVuZ3RoKDIpO1xuICBleHBlY3QodHJhbnNhY3Rpb24ub3BlcmF0aW9uc1sxXS5rZXlzKS50b0hhdmVMZW5ndGgoMik7XG4gIC8vIFRPRE86IFZhbGlkYXRlIHRyYW5zYWN0aW9uIGNvbnRlbnRzIG1vcmVcblxuICB0cmFuc2FjdGlvbiA9IEJ1ZGdldENvbnRyb2xsZXIucGF5KFxuICAgIGZyb20ucHViS2V5LFxuICAgIHByb2dyYW0ucHViS2V5LFxuICAgIHRvLnB1YktleSxcbiAgICAxMjMsXG4gICAgQnVkZ2V0Q29udHJvbGxlci5zaWduYXR1cmVDb25kKGZyb20ucHViS2V5KSxcbiAgKTtcbiAgZXhwZWN0KHRyYW5zYWN0aW9uLm9wZXJhdGlvbnNbMF0ua2V5cykudG9IYXZlTGVuZ3RoKDIpO1xuICBleHBlY3QodHJhbnNhY3Rpb24ub3BlcmF0aW9uc1sxXS5rZXlzKS50b0hhdmVMZW5ndGgoMSk7XG4gIC8vIFRPRE86IFZhbGlkYXRlIHRyYW5zYWN0aW9uIGNvbnRlbnRzIG1vcmVcblxuICB0cmFuc2FjdGlvbiA9IEJ1ZGdldENvbnRyb2xsZXIucGF5KFxuICAgIGZyb20ucHViS2V5LFxuICAgIHByb2dyYW0ucHViS2V5LFxuICAgIHRvLnB1YktleSxcbiAgICAxMjMsXG4gICAgQnVkZ2V0Q29udHJvbGxlci5zaWduYXR1cmVDb25kKGZyb20ucHViS2V5KSxcbiAgICBCdWRnZXRDb250cm9sbGVyLmRhdGV0aW1lQ29uZChmcm9tLnB1YktleSwgbmV3IERhdGUoKSksXG4gICk7XG4gIGV4cGVjdCh0cmFuc2FjdGlvbi5vcGVyYXRpb25zWzBdLmtleXMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgZXhwZWN0KHRyYW5zYWN0aW9uLm9wZXJhdGlvbnNbMV0ua2V5cykudG9IYXZlTGVuZ3RoKDEpO1xuICAvLyBUT0RPOiBWYWxpZGF0ZSB0cmFuc2FjdGlvbiBjb250ZW50cyBtb3JlXG5cbiAgdHJhbnNhY3Rpb24gPSBCdWRnZXRDb250cm9sbGVyLnBheU9uQWxsKFxuICAgIGZyb20ucHViS2V5LFxuICAgIHByb2dyYW0ucHViS2V5LFxuICAgIHRvLnB1YktleSxcbiAgICAxMjMsXG4gICAgQnVkZ2V0Q29udHJvbGxlci5zaWduYXR1cmVDb25kKGZyb20ucHViS2V5KSxcbiAgICBCdWRnZXRDb250cm9sbGVyLmRhdGV0aW1lQ29uZChmcm9tLnB1YktleSwgbmV3IERhdGUoKSksXG4gICk7XG4gIGV4cGVjdCh0cmFuc2FjdGlvbi5vcGVyYXRpb25zWzBdLmtleXMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgZXhwZWN0KHRyYW5zYWN0aW9uLm9wZXJhdGlvbnNbMV0ua2V5cykudG9IYXZlTGVuZ3RoKDEpO1xuICAvLyBUT0RPOiBWYWxpZGF0ZSB0cmFuc2FjdGlvbiBjb250ZW50cyBtb3JlXG59KTtcblxudGVzdCgnYXBwbHknLCAoKSA9PiB7XG4gIGNvbnN0IGZyb20gPSBuZXcgQnVzQWNjb3VudCgpO1xuICBjb25zdCBwcm9ncmFtID0gbmV3IEJ1c0FjY291bnQoKTtcbiAgY29uc3QgdG8gPSBuZXcgQnVzQWNjb3VudCgpO1xuICBsZXQgdHJhbnNhY3Rpb247XG5cbiAgdHJhbnNhY3Rpb24gPSBCdWRnZXRDb250cm9sbGVyLnNlYWxXaXRoRGF0ZXRpbWUoXG4gICAgZnJvbS5wdWJLZXksXG4gICAgcHJvZ3JhbS5wdWJLZXksXG4gICAgdG8ucHViS2V5LFxuICAgIG5ldyBEYXRlKCksXG4gICk7XG4gIGV4cGVjdCh0cmFuc2FjdGlvbi5rZXlzKS50b0hhdmVMZW5ndGgoMyk7XG4gIC8vIFRPRE86IFZhbGlkYXRlIHRyYW5zYWN0aW9uIGNvbnRlbnRzIG1vcmVcblxuICB0cmFuc2FjdGlvbiA9IEJ1ZGdldENvbnRyb2xsZXIuc2VhbFdpdGhTaWduYXR1cmUoXG4gICAgZnJvbS5wdWJLZXksXG4gICAgcHJvZ3JhbS5wdWJLZXksXG4gICAgdG8ucHViS2V5LFxuICApO1xuICBleHBlY3QodHJhbnNhY3Rpb24ua2V5cykudG9IYXZlTGVuZ3RoKDMpO1xuICAvLyBUT0RPOiBWYWxpZGF0ZSB0cmFuc2FjdGlvbiBjb250ZW50cyBtb3JlXG59KTtcbiJdfQ==